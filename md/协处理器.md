<!--
 * @Author: tangdaoyong
 * @Date: 2021-02-09 09:51:02
 * @LastEditors: tangdaoyong
 * @LastEditTime: 2021-02-09 09:58:41
 * @Description: 协处理器
-->
# 协处理器

## 介绍

`协处理器（coprocessor）`，一种芯片，用于减轻系统微处理器的`特定处理任务`。
`协处理器`，这是一种协助中央处理器完成其无法执行或执行效率、效果低下的处理工作而开发和应用的处理器。这种中央处理器无法执行的工作有很多，比如设备间的`信号传输`、`接入设备`的管理等；而执行效率、效果低下的有`图形处理`、`声频处理`等。为了进行这些处理，各种辅助处理器就诞生了。需要说明的是，由于现在的计算机中，`整数运算器（ALU）`与`浮点运算器（FPU）`已经集成在一起，因此`浮点处理器`已经不算是辅助处理器。而内建于`CPU`中的`协处理器`，同样不算是辅助处理器，除非它是独立存在。

## 复杂运算

工程师可设计能完成任何运算的ALU，不论运算有多复杂；问题在于运算越复杂，ALU成本越高，在处理器中占用的空间越大，消耗的电能越多。 于是，工程师们经常计算一个折中的方案，提供给处理器（或其他电路）一个能使其运算高速的ALU，但同时又避免ALU设计的太复杂而价格昂贵。设想你需要计算一个数的平方根，数字工程师将评估以下的选项来完成此操作∶
0. 设计一个极度复杂的ALU，它能够一步完成对任意数字的平方根运算。这被称为单时钟脉冲计算。
1. 设计一个非常复杂的ALU，它能够分几步完成一个数字的平方根运算。不过，这里有个诀窍，中间结果经过一连串电路，就像是工厂里的生产线。这甚至使得ALU能够在完成前一次运算前就接受新的数字。这使得ALU能够以与单时钟脉冲同样的速度产生数字，虽然从ALU输出的结果有一个初始延迟。这被称为计算流水线。
2. 设计一个复杂的ALU，它能够计算分几步计算一个数字的平方根。这被称为互动计算，经常依赖于带有嵌入式微码的复杂控制单元。
3. 在处理器中设计一个简单的ALU，去掉一个昂贵的专门用于此运算的处理器，再选择以上三个选项之一。这被称为协处理器。
告诉编程人员没有协处理器和仿真设备，于是他们必须自己写出算法来用软件计算平方根。这是由软件库完成的。
对协处理器进行仿真，也就是说，只要一个程序想要进行平方根的计算，就让处理器检查当前有没有协处理器。如果有的话就使用其进行计算，如果没有的话，中断程序进程并调用操作系统通过软件算法来完成平方根的计算。这被称为软件仿真。
以上给出的选项按最快和最贵到最慢和最经济排列。于是，虽然甚至是最简单的计算机也能计算最复杂的公式，但是最简单的计算机经常需要耗费大量时间，通过若干步才能完成。 强大的处理器，比如英特尔酷睿和AMD64系列对一些简单的运算采用1号选项，对最常见的复杂运算采用2号选项，对极为复杂的运算采用3号选项。这是具有在处理器中构造非常复杂的ALU的能力为前提的。
